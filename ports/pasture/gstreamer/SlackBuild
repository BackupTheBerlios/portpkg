# this is a wrapper around the original build-script from
# Slackware-current, since on current-systems this is already
# installed, portpkg won't use it. sorry, i cannot change
# revision number for that reason

NAME=gstreamer
VERSION=0.8.7
ARCH=${ARCH:-i486}
BUILD=1

# we need to remove any other packages before checkinstall
# runs a installpkg on it
removepkg $NAME

# check if slacktrack is installed
if [ -f /var/log/packages/slacktrack-* ]; then
    echo "You have installed 'slacktrack' which conflicts with 'checkinstall'."
    echo "Please remove it and reinstall 'checkinstall' at least for"
    echo "compiling this package."
    exit 1
fi
		
# wrappadap
checkinstall -S -y \
  --pkgname=$NAME \
  --pkgversion=$VERSION \
  --pkgarch=$ARCH \
  --pkgrelease=$BUILD \
  --pakdir=/tmp \
  --strip=yes \
  --stripso=yes \
  --gzman=yes \
  --backup=no \
  "sh $NAME.build" || exit 1
